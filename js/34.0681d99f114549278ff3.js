(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"180":function(e,t,a){e.exports=a.p+"static/images/dealing.666a6c7ff9fb5e714e717136bdf18adb.png"},"188":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(2),n=a.n(r),c=a(4),o=a(10),i=a(8),s=a(9),l=function(){function WxShare(){Object(i.a)(this,WxShare)}var e,t;return Object(s.a)(WxShare,[{"key":"init","value":function init(e){this.run(e||{})}},{"key":"run","value":(t=Object(o.a)(n.a.mark((function _callee(e){var t,a,r,o,i,s;return n.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:t=e.appType||"风投诉",a=e.img,r=e.title||t,o=e.desc&&"".concat(e.desc," - ").concat(t)||"-来自风投诉",i=e.title&&"".concat(e.title," - ").concat(t)||"-风投诉",s=e.url||window.location.href,this.ajax({"path":"//api.cmpp.v.ifeng.com/api/SecertPost","data":"url="+encodeURIComponent(s),"success":function success(t){var n=t&&t.data||{};window.wx&&window.wx.config&&window.wx.config({"debug":!1,"appId":n.appId,"timestamp":n.timestamp.toString(),"nonceStr":n.nonceStr.toString(),"signature":n.signature.toString(),"jsApiList":["onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","onMenuShareTimeline","onMenuShareWeibo"],"openTagList":["wx-open-launch-weapp","wx-open-launch-app"]}),window.wx.ready((function(){window.wx.onMenuShareAppMessage({"title":r,"imgUrl":a,"link":s,"desc":o,"success":function success(){e.shareSuccess&&e.shareSuccess()},"fail":function fail(e){"object"==("undefined"==typeof window?"undefined":Object(c.a)(window))&&window.BJ_REPORT&&window.BJ_REPORT.report(e,!1,"wx_share_err")}}),window.wx.onMenuShareTimeline({"title":i,"link":s,"imgUrl":a,"success":function success(){e.shareSuccess&&e.shareSuccess()},"fail":function fail(e){"object"==("undefined"==typeof window?"undefined":Object(c.a)(window))&&window.BJ_REPORT&&window.BJ_REPORT.report(e,!1,"wx_share_err")}}),window.wx.onMenuShareQZone({"title":r,"desc":o,"link":s,"imgUrl":a,"success":function success(){e.shareSuccess&&e.shareSuccess()},"fail":function fail(e){"object"==("undefined"==typeof window?"undefined":Object(c.a)(window))&&window.BJ_REPORT&&window.BJ_REPORT.report(e,!1,"wx_share_err")}}),window.wx.onMenuShareQQ({"title":r,"desc":o,"link":s,"imgUrl":a,"success":function success(){e.shareSuccess&&e.shareSuccess()},"fail":function fail(){"object"==("undefined"==typeof window?"undefined":Object(c.a)(window))&&window.BJ_REPORT&&window.BJ_REPORT.report(error,!1,"wx_share_err")}})})),window.wx.error&&window.wx.error((function(e){"object"==("undefined"==typeof window?"undefined":Object(c.a)(window))&&window.BJ_REPORT&&window.BJ_REPORT.report(e,!1,"wx_share_err")}))}});case 8:case"end":return n.stop()}}),_callee,this)}))),function run(e){return t.apply(this,arguments)})},{"key":"ajax","value":(e=Object(o.a)(n.a.mark((function _callee2(e){var t;return n.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:try{(t=new XMLHttpRequest).open("post",e.path+"?_"+Math.random()),t.setRequestHeader("content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4===t.readyState&&(t.status>=200&&t.status<300?e.success.call(void 0,JSON.parse(t.responseText)):t.status>=400&&e.fail.call(void 0,t))},t.send(e.data)}catch(e){}case 1:case"end":return a.stop()}}),_callee2)}))),function ajax(t){return e.apply(this,arguments)})}]),WxShare}()},"260":function(e,t,a){},"296":function(e,t,a){"use strict";a.r(t);var r,n=a(8),c=a(9),o=a(20),i=a(17),s=a(18),l=a(11),u=a(22),d=a.n(u),p=a(2),h=a.n(p),b=a(10),f=a(5),g=a(13),j=a(140),m=a(3),v=a(52),O=a(139);r=a(187);var x=function UploadImg(e){return function(t){Object(i.a)(T,t);var a=Object(s.a)(T);function T(){var e;Object(n.a)(this,T);for(var t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return e=a.call.apply(a,[this].concat(c)),Object(l.a)(Object(o.a)(e),"state",{"imgPath":[],"cos":{},"imgIndex":0,"VideoPath":[],"urlPrefix":void 0,"uploadImgPathArray":[],"uploadVideoPathArray":[],"processArray":[],"isStarUpload":!1}),Object(l.a)(Object(o.a)(e),"events",new m.default.Events),Object(l.a)(Object(o.a)(e),"uploadNum",0),Object(l.a)(Object(o.a)(e),"liveUploadNum",0),Object(l.a)(Object(o.a)(e),"AllSettledFileUpload",(function(){e.events.on("finish",(function(t){console.log("finish"),Object(v.a)(e.state.processArray).then((function(t){var a=t.map((function(e){return e.value}));if(e.liveUploadNum++,e.liveUploadNum==e.uploadNum&&(e.liveUploadNum=0,e.uploadNum=0,e.events.trigger("endUpload")),a.every((function(e){return 1===e})))console.log("进入"),e.events.trigger("uploadFinish",e.state.uploadImgPathArray,e.state.uploadVideoPathArray);else{for(var r=[],n=a.indexOf(0);-1!=n;)r.push(n),n=a.indexOf(0,n+1);r=r.map((function(e){return e+1})),e.events.trigger("uploadFinish",e.state.uploadImgPathArray,e.state.uploadVideoPathArray,r)}}))}))})),Object(l.a)(Object(o.a)(e),"initCosH5",(function(){var t,a=Object(o.a)(e),n=Object(m.getStorageSync)("Authorization");return new r({"getAuthorization":(t=Object(b.a)(h.a.mark((function _callee(e,t){var r,c,o;return h.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.request)({"url":"https://skserver.ifeng.com/cos/getCredential","method":"POST","dataType":"json","header":{"content-type":"application/x-www-form-urlencoded"},"data":{"token":n,"appId":"ifeng-complaint"}});case 2:if(r=e.sent,c=r.data,o=c&&c.credentials,c&&o){e.next=7;break}return e.abrupt("return",console.error("credentials invalid"));case 7:a.setState({"urlPrefix":c.urlPrefix}),t({"TmpSecretId":o.tmpSecretId,"TmpSecretKey":o.tmpSecretKey,"XCosSecurityToken":o.sessionToken,"StartTime":c.startTime,"ExpiredTime":c.expiredTime,"ScopeLimit":!0});case 9:case"end":return e.stop()}}),_callee)}))),function getAuthorization(e,a){return t.apply(this,arguments)})})})),Object(l.a)(Object(o.a)(e),"initCosWeApp",(function(){var t,a=Object(o.a)(e),n=Object(m.getStorageSync)("Authorization");return new r({"getAuthorization":(t=Object(b.a)(h.a.mark((function _callee2(e,t){var r,c,o;return h.a.wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.request)({"url":"https://skserver.ifeng.com/cos/getCredential","method":"POST","dataType":"json","header":{"content-type":"application/x-www-form-urlencoded"},"data":{"token":n,"appId":"ifeng-complaint"}});case 2:if(r=e.sent,c=r.data,o=c&&c.credentials,c&&o){e.next=7;break}return e.abrupt("return",console.error("credentials invalid"));case 7:a.setState({"urlPrefix":c.urlPrefix}),t({"TmpSecretId":o.tmpSecretId,"TmpSecretKey":o.tmpSecretKey,"XCosSecurityToken":o.sessionToken,"StartTime":c.startTime,"ExpiredTime":c.expiredTime});case 9:case"end":return e.stop()}}),_callee2)}))),function getAuthorization(e,a){return t.apply(this,arguments)})})})),Object(l.a)(Object(o.a)(e),"uploadH5",function(){var t=Object(b.a)(h.a.mark((function _callee3(t,a,r){var n,c,i,s,u,d,p;return h.a.wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:if(n=Object(o.a)(e),c=e.state.cos,i=[],console.log("fileObject",t),s="",2!==r){a.next=13;break}return d=t.path,s=d.substr(d.lastIndexOf("/")+1),a.next=10,e.convertObjectUrlToBlob(d);case 10:u=a.sent,a.next=17;break;case 13:return s=t.substr(t.lastIndexOf("/")+1),a.next=16,e.convertObjectUrlToBlob(t);case 16:u=a.sent;case 17:e.events.trigger("starUpload"),p=new Date(+new Date+288e5).toISOString().replace(/T/g,"-").replace(/\.[\d]{3}Z/,"").replace(/:/g,""),s=1===r?"img/".concat(p,"/")+s+".jpg":"video/".concat(p,"/")+s+".mp4",c.putObject({"Bucket":"ifeng-cos-ugc-upload-1300722751","Region":"ap-beijing","Key":"".concat(s),"Body":u,"onProgress":function onProgress(e){}},(function(e,t){var a=new Promise((function(t,a){e?a(0):t(1)}));a.then((function(e){console.log(e),i.push(a),n.setState(Object(l.a)({"processArray":n.state.processArray.concat(i)},1===r?"uploadImgPathArray":"uploadVideoPathArray",1===r?n.state.uploadImgPathArray.concat("".concat(n.state.urlPrefix,"/").concat(s)):n.state.uploadVideoPathArray.concat("".concat(n.state.urlPrefix,"/").concat(s)))),n.events.trigger("finish")})).catch((function(e){i.push(a)}))}));case 21:case"end":return a.stop()}}),_callee3)})));return function(e,a,r){return t.apply(this,arguments)}}()),Object(l.a)(Object(o.a)(e),"uploadWeApp",(function(t,a){var r=Object(o.a)(e),n=e.state.cos,c=[],i=t.substr(t.lastIndexOf("/")+1);e.events.trigger("starUpload");var s=new Date(+new Date+288e5).toISOString().replace(/T/g,"-").replace(/\.[\d]{3}Z/,"").replace(/:/g,"");i=1===a?"img/".concat(s,"/")+i+".jpg":"video/".concat(s,"/")+i+".mp4",n.postObject({"Bucket":"ifeng-cos-ugc-upload-1300722751","Region":"ap-beijing","Key":i,"FilePath":t,"onProgress":function onProgress(e){console.log(JSON.stringify(e))}},(function(e,t){var n=new Promise((function(t,a){e?a(0):t(1)}));n.then((function(e){console.log(e),c.push(n),r.setState(Object(l.a)({"processArray":r.state.processArray.concat(c)},1===a?"uploadImgPathArray":"uploadVideoPathArray",1===a?r.state.uploadImgPathArray.concat("".concat(r.state.urlPrefix,"/").concat(i)):r.state.uploadVideoPathArray.concat("".concat(r.state.urlPrefix,"/").concat(i)))),r.events.trigger("finish")})).catch((function(e){c.push(n)}))}))})),Object(l.a)(Object(o.a)(e),"upload",function(){var t=Object(b.a)(h.a.mark((function _callee4(t,a){return h.a.wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:e.uploadNum=a&&a.length||0,1===t?a.map((function(t,a){e.uploadH5(t,a,1)})):a.map((function(t,a){e.uploadH5(t,a,2)}));case 2:case"end":return r.stop()}}),_callee4)})));return function(e,a){return t.apply(this,arguments)}}()),Object(l.a)(Object(o.a)(e),"choose",function(){var t=Object(b.a)(h.a.mark((function _callee5(t,a,r,n){var c,o,i,s;return h.a.wrap((function _callee5$(l){for(;;)switch(l.prev=l.next){case 0:if(!a){l.next=18;break}return l.prev=1,l.next=4,Object(m.chooseImage)({"count":r||9,"sourceType":Object(g.a)(t)});case 4:if(c=l.sent,!e.isHasMaxFile(c.tempFiles,n)){l.next=7;break}return l.abrupt("return",!1);case 7:return e.setState({"imgPath":e.state.imgPath.concat(c.tempFilePaths)}),console.log(c,"图片"),l.next=11,e.upload(1,c.tempFilePaths);case 11:l.next=16;break;case 13:l.prev=13,l.t0=l.catch(1),console.log(l.t0);case 16:l.next=39;break;case 18:return l.prev=18,l.next=21,Object(m.chooseVideo)({"sourceType":Object(g.a)(t)});case 21:if(o=l.sent,!e.isHasMaxFile(o.tempFiles,n)){l.next=24;break}return l.abrupt("return",!1);case 24:if(i=[],o&&o.tempFiles.length>0&&(i=o.tempFiles.filter((function(t){if("image/png"===t.type||"image/jpeg"===t.type){console.log(t,"0---------");var a=[];return a.push(t.path),e.dealImgFunction(a),!1}return!0}))),!(i.length>0)){l.next=34;break}return console.log(i),s=i.map((function(e){return e.path})),console.log(s),e.setState({"VideoPath":e.state.VideoPath.concat(s)}),console.log(o,"视频"),l.next=34,e.upload(2,i);case 34:l.next=39;break;case 36:l.prev=36,l.t1=l.catch(18),console.log(l.t1);case 39:case"end":return l.stop()}}),_callee5,null,[[1,13],[18,36]])})));return function(e,a,r,n){return t.apply(this,arguments)}}()),Object(l.a)(Object(o.a)(e),"dealImgFunction",function(){var t=Object(b.a)(h.a.mark((function _callee6(t){return h.a.wrap((function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:return console.log(t),e.setState({"imgPath":e.state.imgPath.concat(t)}),a.next=4,e.upload(1,t);case 4:case"end":return a.stop()}}),_callee6)})));return function(e){return t.apply(this,arguments)}}()),Object(l.a)(Object(o.a)(e),"isHasMaxFile",(function(t,a){if(!t)return!1;for(var r=0,n=t.length;r<n;r++){if((t[r]&&t[r].size||0)>(a||104857600))return e.events.trigger("hasMaxFile"),!0}return!1})),Object(l.a)(Object(o.a)(e),"deleteImg",(function(t,a){if(1===a){var r=e.state.imgPath,n=e.state.uploadImgPathArray;r.splice(t,1),n.splice(t,1),e.setState({"imgPath":r,"uploadImgPathArray":n})}else{var c=e.state.VideoPath,o=e.state.uploadVideoPathArray;c.splice(t,1),o.splice(t,1),e.setState({"VideoPath":c,"uploadVideoPathArray":o})}})),Object(l.a)(Object(o.a)(e),"convertObjectUrlToBlob",(function(e){return new Promise((function(t,a){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(){200===this.status?t(this.response):a({"status":this.status})},r.send()}))})),e}return Object(c.a)(T,[{"key":"componentDidMount","value":function componentDidMount(){this.AllSettledFileUpload();var e={};e=this.initCosH5(),this.setState({"cos":e})}},{"key":"render","value":function render(){var t=this.state,a=t.uploadImgPathArray,r=t.imgPath,n=t.VideoPath,c=t.processArray,o=t.uploadVideoPathArray;return Object(O.jsx)(j.o,{"children":Object(O.jsx)(e,Object(f.a)(Object(f.a)({"choose":this.choose,"imgPath":r,"VideoPath":n,"uploadImgPathArray":a,"deleteImg":this.deleteImg},this.props),{},{"processArray":c,"uploadVideoPathArray":o,"events":this.events}))})}}]),T}(u.Component)},w=a(19),y=a(15),k=function chooseImageH5(e){var t,a=e.type,r=(e.count,{"errMsg":"chooseImage:ok","tempFilePaths":[],"tempFiles":[]}),n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("id","test"),"video"===a&&n.setAttribute("accept","video/*"),"img"===a&&n.setAttribute("accept","image/*"),n.setAttribute("style","position: fixed; top: -4000px; left: -3000px; z-index: -300;"),document.body.appendChild(n);var c=new Promise((function(e){t=e})),o=document.getElementById("test"),i=document.createEvent("MouseEvents");return i.initEvent("click",!0,!0),o.dispatchEvent(i),o.onchange=function(e){var a=Object(g.a)(e.target.files);a&&a.forEach((function(e){var t=new Blob([e],{"type":e.type}),a=URL.createObjectURL(t);r.tempFilePaths.push(a),r.tempFiles.push({"path":a,"size":e.size,"type":e.type,"originalFileObj":e})})),e.target.value="",t(r)},c},P=a(4),S=a(187);function serializeParams(e){return e?Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat("object"===Object(P.a)(e[t])?encodeURIComponent(JSON.stringify(e[t])):encodeURIComponent(e[t]))})).join("&"):""}var _,R,I=function(e){Object(i.a)(uploadH5,e);var t,a,r=Object(s.a)(uploadH5);function uploadH5(e){var t,a,c,i=e.token;return Object(n.a)(this,uploadH5),c=r.call(this),Object(l.a)(Object(o.a)(c),"token",void 0),Object(l.a)(Object(o.a)(c),"urlPrefix",void 0),Object(l.a)(Object(o.a)(c),"progressData",void 0),Object(l.a)(Object(o.a)(c),"completeData",void 0),Object(l.a)(Object(o.a)(c),"key",void 0),c.token=i,Object(w.a)((t=Object(o.a)(c),Object(y.a)(uploadH5.prototype)),"init",t).call(t,{"token":i,"type":"H5"}),c.urlPrefix=Object(w.a)((a=Object(o.a)(c),Object(y.a)(uploadH5.prototype)),"urlPrefix",a),c.progressData={"percent":0,"speed":0,"total":0,"loaded":0},c}return Object(c.a)(uploadH5,[{"key":"choose","value":(a=Object(b.a)(h.a.mark((function _callee(e){var t,a;return h.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k({"type":e,"count":1});case 2:return t=r.sent,console.log(t),a=t.tempFiles,r.next=7,this.upload(a[0].originalFileObj);case 7:case"end":return r.stop()}}),_callee,this)}))),function choose(e){return a.apply(this,arguments)})},{"key":"upload","value":(t=Object(b.a)(h.a.mark((function _callee2(e){return h.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:Object(w.a)(Object(y.a)(uploadH5.prototype),"uploadSource",this).call(this,e,{"progressCallback":this.listenProgress.bind(this),"errCallback":this.listenError.bind(this),"dataCallback":this.listenComplete.bind(this)});case 1:case"end":return t.stop()}}),_callee2,this)}))),function upload(e){return t.apply(this,arguments)})},{"key":"listenProgress","value":function listenProgress(e){this.progressData.percent=e.percent,this.progressData.loaded=e.loaded,this.progressData.speed=e.speed,this.progressData.total=e.total}},{"key":"listenError","value":function listenError(e){}},{"key":"listenComplete","value":function listenComplete(e){console.log(e)}},{"key":"status","value":function status(e,t){var a=e.process,r=e.data;e.error;if(a&&this.statusCallback(t,this.progressData),r&&200===this.completeData.statusCode){[].push(this.urlPrefix+key)}}},{"key":"statusCallback","value":function statusCallback(e,t){var a=function _loop(a){var r=void 0;t.hasOwnProperty(a)&&Object.defineProperty(t,a,{"get":function get(){return r},"set":function set(a){r=a,e(t)}})};for(var r in this.progressData)a(r)}}]),uploadH5}(function(){function Core(){Object(n.a)(this,Core),Object(l.a)(this,"cos",void 0),Object(l.a)(this,"urlPrefix",void 0)}return Object(c.a)(Core,[{"key":"init","value":function init(e){var t,a=e.token,r=e.type,n=this;r.toLowerCase(),this.cos=new S({"getAuthorization":(t=Object(b.a)(h.a.mark((function _callee(e,t){var r,c,o,i;return h.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://test0.skserver.ifengidc.com/cos/getCredential",{"headers":{"content-type":"application/x-www-form-urlencoded"},"method":"POST","body":serializeParams({"token":a,"appId":"ifeng-complaint"})});case 3:return r=e.sent,console.log(r),e.next=7,r.json();case 7:if(c=e.sent,o=c.data,i=o&&o.credentials,n.urlPrefix=o&&o.urlPrefix,o&&i){e.next=13;break}return e.abrupt("return",console.error("credentials invalid"));case 13:t({"TmpSecretId":i.tmpSecretId,"TmpSecretKey":i.tmpSecretKey,"XCosSecurityToken":i.sessionToken,"StartTime":o.startTime,"ExpiredTime":o.expiredTime,"ScopeLimit":!0}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),_callee,null,[[0,16]])}))),function getAuthorization(e,a){return t.apply(this,arguments)})})}},{"key":"uploadSource","value":function uploadSource(e,t){var a=t.progressCallback,r=t.errCallback,n=t.dataCallback;this.cos.putObject({"Bucket":"ifeng-cos-ugc-upload-1300722751","Region":"ap-beijing","Key":"ceshiwenjian","Body":e,"onProgress":function onProgress(e){a(e)}},(function(e,t){e?r(e):n(t)}))}},{"key":"convertObjectUrlToBlob","value":function convertObjectUrlToBlob(e){return new Promise((function(t,a){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(){200===this.status?t(this.response):a({"status":this.status})},r.send()}))}}]),Core}()),A=a(188),C=(a(260),a(12)),N=a(23),B=(R=_=function(e){Object(i.a)(ShareWxUi,e);var t,r=Object(s.a)(ShareWxUi);function ShareWxUi(){return Object(n.a)(this,ShareWxUi),r.apply(this,arguments)}return Object(c.a)(ShareWxUi,[{"key":"componentDidMount","value":(t=Object(b.a)(h.a.mark((function _callee(){var e,t;return h.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.props.create();case 2:return e=a.sent,a.next=5,Object(m.canvasToTempFilePath)({"canvas":e});case 5:return t=a.sent,a.next=8,Object(m.saveImageToPhotosAlbum)({"filePath":t.tempFilePath,"fail":function fail(){Object(m.showModal)({"title":"温馨提示","content":"需要您授权相册权限","success":function success(e){e.confirm&&Object(m.openSetting)({"success":function success(){}})},"fail":function fail(){console.log("用户点击了取消")}})},"success":function success(){Object(m.showToast)({"title":"快去相册看看吧","icon":"success","duration":3e3})}});case 8:case"end":return a.stop()}}),_callee,this)}))),function componentDidMount(){return t.apply(this,arguments)})},{"key":"render","value":function render(){var e=this.props,t=e.content,r=e.title,n=e.enterpriseName;return console.log(this.props),Object(O.jsxs)(j.o,{"className":"container","ref":this.props.refs,"children":[Object(O.jsxs)(j.o,{"className":"containerImage","children":[Object(O.jsx)(j.o,{"className":"header","children":Object(O.jsx)(j.l,{"className":"headerBox","children":"消费纠纷，就来找风投诉"})}),Object(O.jsx)(j.o,{"className":"titleBox","children":Object(O.jsx)(j.l,{"className":"title","children":r})}),Object(O.jsxs)(j.o,{"className":"center","children":[Object(O.jsx)(j.o,{"className":"centerOneBox","children":Object(O.jsx)(j.l,{"className":"centerOne","children":"投诉对象"})}),Object(O.jsx)(j.o,{"className":"centerTwoBox","children":Object(O.jsx)(j.l,{"className":"centerTwo","children":n})})]}),Object(O.jsxs)(j.o,{"className":"footer","children":[Object(O.jsx)(j.l,{"className":"footerOne","children":"投诉内容"}),Object(O.jsx)(j.l,{"className":"footerTwo","children":t})]})]}),Object(O.jsx)(j.e,{"className":"qrImg","src":a(180)})]})}}]),ShareWxUi}(u.Component),function(e){Object(i.a)(Query,e);var t,a=Object(s.a)(Query);function Query(){var e;Object(n.a)(this,Query);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return e=a.call.apply(a,[this].concat(r)),Object(l.a)(Object(o.a)(e),"headerText",d.a.createRef()),Object(l.a)(Object(o.a)(e),"state",{"nodeArr":[],"width":0,"height":0}),Object(l.a)(Object(o.a)(e),"ctx",void 0),Object(l.a)(Object(o.a)(e),"canvas",void 0),Object(l.a)(Object(o.a)(e),"nodeObj",void 0),Object(l.a)(Object(o.a)(e),"that",void 0),Object(l.a)(Object(o.a)(e),"dpr",void 0),Object(l.a)(Object(o.a)(e),"create",Object(b.a)(h.a.mark((function _callee(){var t,a;return h.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(m.getSystemInfo)();case 2:return t=r.sent,a=t.pixelRatio,e.dpr=a||2,e.nodeObj=e.searchDomNode(e.headerText.current),console.log(e.nodeObj),r.next=9,e.getAllDom(e.nodeObj.clearNode);case 9:return r.abrupt("return",r.sent);case 10:case"end":return r.stop()}}),_callee)})))),Object(l.a)(Object(o.a)(e),"getAllDom",function(){var t=Object(b.a)(h.a.mark((function _callee2(t){var a,r,n,c,o,i,s;return h.a.wrap((function _callee2$(l){for(;;)switch(l.prev=l.next){case 0:a=[],r=Object(N.a)(t.entries()),l.prev=2,r.s();case 4:if((n=r.n()).done){l.next=16;break}return c=Object(C.a)(n.value,1),o=c[0],l.next=8,e.initQuery(o);case 8:if(null!==(i=l.sent)){l.next=13;break}return l.next=12,e.initQuery(o);case 12:i=l.sent;case 13:a.push(i);case 14:l.next=4;break;case 16:l.next=21;break;case 18:l.prev=18,l.t0=l.catch(2),r.e(l.t0);case 21:return l.prev=21,r.f(),l.finish(21);case 24:if(!(a.length>0)){l.next=29;break}return l.next=27,e.initCanvas(a);case 27:return s=l.sent,l.abrupt("return",new Promise((function(e,t){e(s)})));case 29:return l.next=31,e.getAllDom(t);case 31:case"end":return l.stop()}}),_callee2,null,[[2,18,21,24]])})));return function(e){return t.apply(this,arguments)}}()),Object(l.a)(Object(o.a)(e),"drawBlock",function(){var t=Object(b.a)(h.a.mark((function _callee3(t,a){var r,n,c,o,i;return h.a.wrap((function _callee3$(s){for(;;)switch(s.prev=s.next){case 0:if(r=a.bgX,n=a.bgY,e.ctx.save(),e.ctx.beginPath(),e.ctx.fillStyle=t.backgroundColor,e.ctx.fillRect(t.left*e.dpr-r,t.top*e.dpr-n,t.width*e.dpr,t.height*e.dpr),!t.backgroundImage||"none"===t.backgroundImage){s.next=13;break}return c=(c=t.backgroundImage).replace("url","").replace('"',"").replace('"',"").replace("(","").replace("'","").replace("'","").replace(")",""),o=Object(f.a)(Object(f.a)({},t),{},{"src":c}),s.next=11,e.loadImage(o);case 11:i=s.sent,e.drawImage(i,{"bgX":r,"bgY":n});case 13:e.drawBorderRadius(t,{"width":t.width*e.dpr,"height":t.height*e.dpr,"x":t.left*e.dpr-r,"y":t.top*e.dpr-n,"type":"image"}),e.ctx.restore();case 15:case"end":return s.stop()}}),_callee3)})));return function(e,a){return t.apply(this,arguments)}}()),Object(l.a)(Object(o.a)(e),"drawLine",(function(t,a,r,n){var c=a.lineHeight,o=a.lineType,i=a.color,s=r.bgX,l=r.bgY,u=n.borderLeft,d=void 0!==u&&u,p=n.borderRight,h=void 0!==p&&p,b=n.borderTop,f=void 0!==b&&b,g=n.borderBottom,j=void 0!==g&&g;e.ctx.save();var m=t.left*e.dpr,v=t.right*e.dpr,O=t.top*e.dpr,x=t.bottom*e.dpr;c=Number(c)*e.dpr,e.ctx.strokeStyle=i,e.ctx.lineWidth=Number(c)*e.dpr,e.ctx.beginPath(),j&&(e.ctx.moveTo(m-s,x-l-c),e.ctx.lineTo(v-s,x-l-c)),f&&(e.ctx.moveTo(m-s,O-l-c),e.ctx.lineTo(v-s,O-l-c)),d&&(e.ctx.moveTo(m-s,O-l-c),e.ctx.lineTo(m-s,x-l-c)),h&&(e.ctx.moveTo(v-s,O-l-c),e.ctx.lineTo(v-s,x-l-c)),"dashed"===o&&e.ctx.setLineDash([7]),e.ctx.stroke(),e.ctx.restore()})),Object(l.a)(Object(o.a)(e),"drawImage",(function(t,a){var r=a.bgX,n=a.bgY;e.ctx.save();var c=t.left*e.dpr-r,o=t.top*e.dpr-n,i=t.width*e.dpr,s=t.height*e.dpr;e.drawBorderRadius(t,{"width":i,"height":s,"x":c,"y":o,"type":"image"}),e.ctx.drawImage(t.img,c,o,i,s),e.ctx.restore()})),Object(l.a)(Object(o.a)(e),"resolveRadius",(function(t,a){return t.includes("%")?t=parseFloat(t)/100*a:t.includes("px")&&(t=parseFloat(t)*e.dpr),t})),Object(l.a)(Object(o.a)(e),"drawBorderRadius",(function(t,a){var r=a.width,n=a.height,c=a.x,o=a.y,i=a.type,s={"borderTopLeftRadius":0,"borderTopRightRadius":0,"borderBottomRightRadius":0,"borderBottomLeftRadius":0};for(var l in s)s.hasOwnProperty(l)&&(s[l]=e.resolveRadius(t[l],r));e.drawRadiusRect({"x":c,"y":o,"w":r,"h":n,"type":i},s)})),Object(l.a)(Object(o.a)(e),"drawRadiusRect",(function(t,a){var r=t.x,n=t.y,c=t.w,i=t.h,s=t.type;console.log(r,n,c,i);var l=a.borderTopLeftRadius,u=void 0===l?0:l,d=a.borderTopRightRadius,p=void 0===d?0:d,h=a.borderBottomRightRadius,b=void 0===h?0:h,f=a.borderBottomLeftRadius,g=void 0===f?0:f;console.log(a);var j=Object(o.a)(e).ctx;j.beginPath(),j.moveTo(r+u,n),j.arcTo(r+c,n,r+c,n+i,p),j.arcTo(r+c,n+i,r,n+i,b),j.arcTo(r,n+i,r,n,g),j.arcTo(r,n,r+c,n,u),"image"===s&&j.clip(),"block"===s&&j.fill(),"line"===s&&j.stroke(),j.closePath()})),Object(l.a)(Object(o.a)(e),"drawText",(function(t,a){var r,n,c=a.bgX,o=a.bgY,i=a.bgRight,s=a.bgWidth;a.bgHeight,e.ctx.save();var l=0,u="",d=[],p=t.type,h=t.fontSize,b=void 0===h?"16px":h,f=t.lineHeight,g=void 0===f?"16px":f,j=t.fontWeight,m=t.textOverflow,v=t.webkitLineClamp,O=(g=parseInt(g.substring(0,(null===(r=g)||void 0===r?void 0:r.length)-2))*e.dpr)-(b=parseInt(b.substring(0,(null===(n=b)||void 0===n?void 0:n.length)-2))*e.dpr),x=e.ctx.measureText("...").width;e.ctx.font="".concat(j," ").concat(b,"px PingFangSC-Semibold");for(var w=0;w<p.length;w++){var y=e.ctx.measureText(p[w]).width;if(u+=p[w],l+=y,("ellipsis"===m&&"none"===v?l+x:l)>=s-(t.left*e.dpr-c)-(i-t.right*e.dpr)){if("ellipsis"===m&&"none"===v){u+="...";break}if("none"!==v&&Number(v)>1&&d.length===Number(v)-1)break;d.push(u),u="",l=0}}if(d.push(u),"none"!==v&&Number(v)>1&&d.length===Number(v)){for(var k=e.ctx.measureText(d[d.length-1]).width;k+x>s-(t.left*e.dpr-c)-(i-t.right*e.dpr);){var P=d[d.length-1];P=P.substring(0,P.length-1),d.pop(),d.push(P),k=e.ctx.measureText(d[d.length-1]).width}d[d.length-1]="".concat(d[d.length-1],"...")}d.forEach((function(a,r){e.ctx.beginPath(),e.ctx.fillStyle=t.color,e.ctx.fillText(a,t.left*e.dpr-c,t.top*e.dpr-o+b*(r+1)+O*r)})),e.drawBorder(t,{"bgX":c,"bgY":o}),e.ctx.restore()})),Object(l.a)(Object(o.a)(e),"resolveBorder",(function(t){var a=(t=(t=t.split(/(\S+)\s+(\S+)\s+([\s\S]+)/)).filter((function(e){return""!==e})))[0].substring(0,t[0].length-2),r=t[1],n=t[2];return function(t,c,o){var i=o.bgX,s=o.bgY;e.drawLine(t,{"lineHeight":a,"lineType":r,"color":n},{"bgX":i,"bgY":s},Object(l.a)({},c,!0))}})),e}return Object(c.a)(Query,[{"key":"initQuery","value":function initQuery(e){return new Promise((function(t,a){try{Object(m.createSelectorQuery)().select("#".concat(e)).fields({"id":!0,"dataset":!0,"size":!0,"rect":!0,"mark":!0,"node":!0,"properties":["scrollX","scrollY","src"],"computedStyle":["margin","backgroundColor","fontSize","color","padding","lineHeight","border","backgroundImage","fontWeight","textOverflow","lineClamp","webkitLineClamp","borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","border","borderBottom","borderTop","borderRight","borderLeft"],"context":!0},(function(e){t(e)})).exec()}catch(e){a(e)}}))}},{"key":"initCanvas","value":(t=Object(b.a)(h.a.mark((function _callee5(e){var t=this;return h.a.wrap((function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=Object(b.a)(h.a.mark((function _callee4(a,r){var n,c,o,i,s,l,u;return h.a.wrap((function _callee4$(d){for(;;)switch(d.prev=d.next){case 0:d.prev=0,console.log(e),n={"bgWidth":0,"bgX":0,"bgY":0,"bgHeight":0,"bgRight":0},c=Object(N.a)(e.entries()),d.prev=4,c.s();case 6:if((o=c.n()).done){d.next=39;break}if(i=Object(C.a)(o.value,2),s=i[0],(l=i[1]).type=t.nodeObj.clearNode.get(l.id),0!==s){d.next=23;break}return d.next=12,t.queryCanvasNode();case 12:return t.canvas=d.sent,t.ctx=t.canvas.getContext("2d"),t.canvas.width=l.width*t.dpr,t.canvas.height=l.height*t.dpr,n={"bgWidth":l.width*t.dpr,"bgHeight":l.height*t.dpr,"bgX":l.left*t.dpr,"bgY":l.top*t.dpr,"bgRight":l.right*t.dpr},console.log(n),d.next=20,t.drawBlock(l,n);case 20:t.setState({"width":l.width,"height":l.height}),d.next=37;break;case 23:if("view"!==l.type||0===s){d.next=28;break}return d.next=26,t.drawBlock(l,n);case 26:d.next=37;break;case 28:if("image"!==l.type){d.next=36;break}return console.log(l),d.next=32,t.loadImage(l);case 32:u=d.sent,t.drawImage(u,n),d.next=37;break;case 36:t.drawText(l,n);case 37:d.next=6;break;case 39:d.next=44;break;case 41:d.prev=41,d.t0=d.catch(4),c.e(d.t0);case 44:return d.prev=44,c.f(),d.finish(44);case 47:a(t.canvas),d.next=53;break;case 50:d.prev=50,d.t1=d.catch(0),r(d.t1);case 53:case"end":return d.stop()}}),_callee4,null,[[0,50],[4,41,44,47]])})));return function(e,t){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}}),_callee5)}))),function initCanvas(e){return t.apply(this,arguments)})},{"key":"drawBorder","value":function drawBorder(e,t){var a=this,r=t.bgX,n=t.bgY;["borderBottom","borderRight","borderTop","borderLeft"].forEach((function(t){e[t].includes("none")||a.resolveBorder(e[t])(e,t,{"bgX":r,"bgY":n})}))}},{"key":"queryCanvasNode","value":function queryCanvasNode(){return new Promise((function(e,t){Object(m.createSelectorQuery)().select("#canvas").fields({"node":!0,"size":!0}).exec((function(t){e(t[0].node)}))}))}},{"key":"searchDomNode","value":function searchDomNode(e){var t,a=this,r={"clearNode":new Map};return"text"===e.nodeName?r.clearNode.set(e.uid,e.childNodes[0]._value):"image"!==e.nodeName&&"view"!==e.nodeName||r.clearNode.set(e.uid,e.nodeName),(null===(t=e.childNodes)||void 0===t?void 0:t.length)>0&&e.childNodes.forEach((function(e,t){var n=a.searchDomNode(e);r={"clearNode":new Map([].concat(Object(g.a)(r.clearNode),Object(g.a)(n.clearNode)))}})),r}},{"key":"loadImage","value":function loadImage(e){var t=this;return new Promise((function(a,r){var n=t.canvas.createImage();e.img=n,n.onload=function(){return a(e)},n.onerror=function(){return r},n.src=e.src}))}},{"key":"render","value":function render(){var e=this.state,t=e.width,a=e.height;return Object(O.jsxs)(j.a,{"children":[Object(O.jsx)(R,Object(f.a)({"create":this.create,"canvas":this.canvas,"refs":this.headerText},this.props)),Object(O.jsx)(j.c,{"id":"canvas","type":"2d","style":{"position":"absolute","bottom":0,"left":"".concat(-9999,"px"),"width":"".concat(t,"px"),"height":"".concat(a,"px")}})]})}}]),Query}(u.Component)||_),U=x(function(e){Object(i.a)(Test,e);var t,a=Object(s.a)(Test);function Test(){var e;Object(n.a)(this,Test);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return e=a.call.apply(a,[this].concat(r)),Object(l.a)(Object(o.a)(e),"state",{"base64":"","share":!1}),Object(l.a)(Object(o.a)(e),"testChoose",(function(t){e.props.choose(t,!0)})),Object(l.a)(Object(o.a)(e),"sub",(function(){console.log(e.props.uploadImgPathArray)})),Object(l.a)(Object(o.a)(e),"testUpload",(function(){console.log("测试上传"),new I({"token":"E8DF4306A96C25579046BC8FCC2DCD34"}).choose("img")})),Object(l.a)(Object(o.a)(e),"share",(function(){e.setState({"share":!0})})),e}return Object(c.a)(Test,[{"key":"componentDidMount","value":(t=Object(b.a)(h.a.mark((function _callee(){return h.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:(new A.a).init({"title":"测试分享","img":"","desc":"我是测试标题"});case 2:case"end":return e.stop()}}),_callee)}))),function componentDidMount(){return t.apply(this,arguments)})},{"key":"render","value":function render(){var e=this,t=this.state,a=(t.base64,t.share,this.props),r=(a.chooseVideo,a.imgPath);return Object(O.jsxs)(j.o,{"children":[r.map((function(t,a){return Object(O.jsxs)(j.a,{"children":[Object(O.jsx)(j.e,{"src":t}),Object(O.jsx)(j.o,{"onClick":function onClick(){e.props.deleteImg(a)},"children":"删除"})]})})),Object(O.jsx)(B,{})]})}}]),Test}(u.Component)),D=function(e){Object(i.a)(TestPage,e);var t=Object(s.a)(TestPage);function TestPage(){var e;Object(n.a)(this,TestPage);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(l.a)(Object(o.a)(e),"state",{"src":"https://ips.ifeng.com/video19.ifeng.com/video09/2021/05/23/p6802131125046087924-102-2-152811.mp4?reqtype=tsl&vid=e54e50ba-3249-4671-b28e-73aec27fa34d&uid=0UAiDm&from=v_Free&pver=vHTML5Player_v2.0.0&sver=&se=&cat=&ptype=&platform=pc&sourceType=h5&dt=1621846206934&gid=OhO5MXmdkSnW&sign=8b662c4c8eb83249c018b61bd3abc1a1&tm=1621846206934"}),e}return Object(c.a)(TestPage,[{"key":"delete","value":function _delete(){console.log("删除video"),Object(m.createVideoContext)("video1").stop()}},{"key":"render","value":function render(){this.state.src;return Object(O.jsx)(j.a,{"children":Object(O.jsx)(U,{})})}}]),TestPage}(u.Component);t.default=D}}]);